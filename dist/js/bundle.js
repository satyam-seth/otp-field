!function e(t,n,o){function a(u,r){if(!n[u]){if(!t[u]){var l="function"==typeof require&&require;if(!r&&l)return l(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[u]={exports:{}};t[u][0].call(s.exports,(function(e){return a(t[u][1][e]||e)}),s,s.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)a(o[u]);return a}({1:[function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=a(e("../utils/logger")),u=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.regex=/[^0-9]/g,this.fieldValue="",t.boxCount<=0)throw new Error("Invalid config box count must be grater than zero.");this.config=t,setInterval((function(){i.default.instance.info("value =>>> ",n.fieldValue)}),1e3)}return o(e,[{key:"focus",value:function(){for(var e=this.config.boxCount-1,t=0;t<this.config.boxCount;t++)if(""===this.getBoxValue(t)){e=t;break}this.focusBox(e)}},{key:"value",get:function(){return this.fieldValue}}]),o(e,[{key:"skeleton",value:function(){var e=document.createElement("div");e.id=this.id,e.className="otp-field";for(var t=0;t<this.config.boxCount;t++)e.appendChild(this.getBox(t));return e}},{key:"getBoxId",value:function(e){return this.config.namespace+"-box-"+e}},{key:"getBoxIndex",value:function(e){var t=e.getAttribute("data-index");if(t)return parseInt(t,10);throw i.default.instance.log("box",e),new Error("Unable to get `data-index` attribute for box")}},{key:"getBox",value:function(e){var t=document.createElement("input");return t.id=this.getBoxId(e),t.type="text",t.maxLength=1,t.autocomplete="off",t.setAttribute("data-index",e.toString()),t.addEventListener("input",this.onBoxInput.bind(this)),t.addEventListener("keydown",this.onBoxKeyDown.bind(this)),t.addEventListener("focus",this.onBoxFocus.bind(this)),t.addEventListener("paste",this.onBoxPaste.bind(this)),t}},{key:"onBoxPaste",value:function(e){e.preventDefault();var t=e.clipboardData.getData("text").replace(this.regex,"");i.default.instance.log("pasted value",t);var n=this.getBoxIndex(e.target);i.default.instance.log("Current box index",n);var o=Math.min(this.config.boxCount-n,t.length);i.default.instance.log("maxLength",o);for(var a=0;a<o;a++)this.setBoxValue(n+a,t[a]);i.default.instance.info("config.onPasteBlur",this.config.onPasteBlur),this.config.onPasteBlur?(i.default.instance.info("Blur box"),e.target.blur()):(i.default.instance.info("Focus box"),this.focusBox(n+o-1)),this.updateValue()}},{key:"updateValue",value:function(){for(var e="",t=0;t<this.config.boxCount;t++)e+=this.getBoxValue(t);i.default.instance.log("value",this.fieldValue,"new value",e),this.fieldValue=e}},{key:"onBoxFocus",value:function(e){i.default.instance.info("focus",e),1===e.target.value.length&&(i.default.instance.log("Select all value for current box, as value of current box not empty",e.target.value),e.target.selectionStart=0,e.target.selectionEnd=1)}},{key:"onBoxKeyDown",value:function(e){i.default.instance.log("keydown",e),"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||(i.default.instance.info("Key:ArrowLeft-ArrowUp move focus to prev box"),e.preventDefault(),this.focusPrevBox(e.target)),"ArrowRight"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),i.default.instance.info("Key:ArrowRight-ArrowUp move focus to next box"),this.focusNextBox(e.target)),"Backspace"!==e.key||""!==e.target.value&&0!==e.target.selectionEnd||(i.default.instance.log("Key:Backspace move focus to prev box"),this.focusPrevBox(e.target)),"Delete"===e.key&&(""===e.target.value||0!==e.target.selectionStart&&1===e.target.selectionEnd)&&(i.default.instance.log("Key:Delete move focus to next box"),this.focusNextBox(e.target))}},{key:"onBoxInput",value:function(e){i.default.instance.info("input",e),i.default.instance.log("Entered Value",e.target.value);var t=e.target.value.replace(this.regex,"");i.default.instance.log("updatedValue Value",t),e.target.value=t,i.default.instance.log("Value updated",t),""!==e.target.value&&(i.default.instance.info("target box value is not empty move focus to next box"),this.focusNextBox(e.target)),this.updateValue()}},{key:"focusNextBox",value:function(e){var t=this.getBoxIndex(e);i.default.instance.info("currentBoxIndex",t),i.default.instance.log("config boxCount",this.config.boxCount),i.default.instance.log("we need to jump to next box",t+1<this.config.boxCount),t+1<this.config.boxCount&&(i.default.instance.log("Focusing to next box at index",t+1),this.focusBox(t+1))}},{key:"focusPrevBox",value:function(e){var t=this.getBoxIndex(e);i.default.instance.info("currentBoxIndex",t),i.default.instance.log("we need to jump to prev box",t-1>=0),t-1>=0&&(i.default.instance.log("Focusing to next box at index",t+1),this.focusBox(t-1))}},{key:"focusBox",value:function(e){var t=this.getBoxAtIndex(e);i.default.instance.info("Focusing to Box",t),t.focus()}},{key:"setBoxValue",value:function(e,t){i.default.instance.log("Setting box at index "+e+" value to "+t),this.getBoxAtIndex(e).value=t}},{key:"getBoxValue",value:function(e){return i.default.instance.log("Getting box at index "+e+" value"),this.getBoxAtIndex(e).value}},{key:"getBoxAtIndex",value:function(e){var t=this.getBoxId(e),n=document.getElementById(t);if(null===n)throw new Error("Unable to get box at index "+e);return n}},{key:"destroy",value:function(){this.element.remove()}},{key:"build",value:function(e){e.appendChild(this.skeleton())}},{key:"id",get:function(){return"otp-field-"+this.config.namespace}},{key:"element",get:function(){return document.getElementById(this.id)}}]),e}();n.default=u},{"../utils/logger":3}],2:[function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var a=o(e("./components/field"));window.onload=function(){new a.default({namespace:"example",boxCount:6,onPasteBlur:!0}).build(document.body)}},{"./components/field":1}],3:[function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logLevels=["log","info","warn","error"],this.logLevel="log"}return o(e,[{key:"setLevel",value:function(e){this.logLevel=e}},{key:"getTimestamp",value:function(){return(new Date).toISOString()}},{key:"shouldLog",value:function(e){var t=this.logLevels.indexOf(this.logLevel);return this.logLevels.indexOf(e)>=t}},{key:"log",value:function(){if(this.shouldLog("log")){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).log.apply(e,["%cLOG:","color: white; background-color: #405d27","["+this.getTimestamp()+"]"].concat(n))}}},{key:"error",value:function(){if(this.shouldLog("error")){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).error.apply(e,["%cERROR:","color: white; background-color: #c94c4c","["+this.getTimestamp()+"]"].concat(n))}}},{key:"warn",value:function(){if(this.shouldLog("warn")){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).warn.apply(e,["%cWARNING:","color: black; background-color: #feb236","["+this.getTimestamp()+"]"].concat(n))}}},{key:"info",value:function(){if(this.shouldLog("info")){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).info.apply(e,["%cINFO:","color: white; background-color: #4040a1","["+this.getTimestamp()+"]"].concat(n))}}}],[{key:"instance",get:function(){return void 0===e._instance&&(e._instance=new e),e._instance}}]),e}();n.default=a},{}]},{},[2]);
//# sourceMappingURL=maps/bundle.js.map
